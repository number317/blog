<!doctype html><html><head><meta charset=utf-8><meta name=description content="Aloha! Welcome to cheon's blog."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=76x76 href=https://number317.github.io/blog/img/apple-touch-icon.png><link rel=icon href=https://number317.github.io/blog/img/pen.svg><link rel=stylesheet href=https://number317.github.io/blog/css/global.css><link rel=stylesheet href=https://number317.github.io/blog/css/nav.css><link rel=stylesheet href=https://number317.github.io/blog/css/header.css><link rel=stylesheet href=https://number317.github.io/blog/css/index.css><link rel=stylesheet href=https://number317.github.io/blog/css/list.css><link rel=stylesheet href=https://number317.github.io/blog/css/single.css><link rel=stylesheet href=https://number317.github.io/blog/css/footer.css><link href="https://fonts.googleapis.com/css?family=Fira+Mono|Noto+Sans+SC|Old+Standard+TT&display=swap" rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><title>cheon's blog</title></head><body><section id=header><ul id=menus><li class=menu><a href=https://number317.github.io><span>Home</span></a></li><li class=menu><a href=https://number317.github.io/blog/categories><span>Categories</span></a></li><li class=menu><a href=https://number317.github.io/blog/tags><span>Tags</span></a></li><li class=menu><a href=https://github.com/number317><span>Projects</span></a></li></ul><h1 id=title><a href=https://number317.github.io/blog/>cheon's blog</a></h1></section><ul id=nav><li>»
<a href=https://number317.github.io/blog/>cheon's blog</a></li><li>»
<a href=https://number317.github.io/blog/struct/>struct</a></li><li class=active>»
<a href=https://number317.github.io/blog/struct/maven_nexus/>Maven & Nexus</a></li></ul><div id=content><main id=main><h1>Maven & Nexus</h1><time>Last updated Tue Dec 17, 2024</time><div><aside><h2>Table of Content</h1><nav id=TableOfContents></nav></aside><article id=content><h1 id=maven-配置使用-nexus-私服>maven 配置使用 nexus 私服</h1><p>修改~/.m2/settings.xml内容如下：</p><details><summary>mvn config</summary><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#888;font-weight:700>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span>&lt;settings xmlns=<span style=color:#666;font-style:italic>&#34;http://maven.apache.org/SETTINGS/1.0.0&#34;</span>
</span></span><span style=display:flex><span>          xmlns:xsi=<span style=color:#666;font-style:italic>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>          xsi:schemaLocation=<span style=color:#666;font-style:italic>&#34;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;servers&gt;
</span></span><span style=display:flex><span>        &lt;server&gt;
</span></span><span style=display:flex><span>            &lt;id&gt;releases&lt;/id&gt;
</span></span><span style=display:flex><span>            &lt;username&gt;admin&lt;/username&gt;
</span></span><span style=display:flex><span>            &lt;password&gt;admin123&lt;/password&gt;
</span></span><span style=display:flex><span>        &lt;/server&gt;
</span></span><span style=display:flex><span>        &lt;server&gt;
</span></span><span style=display:flex><span>            &lt;id&gt;snapshots&lt;/id&gt;
</span></span><span style=display:flex><span>            &lt;username&gt;admin&lt;/username&gt;
</span></span><span style=display:flex><span>            &lt;password&gt;admin123&lt;/password&gt;
</span></span><span style=display:flex><span>        &lt;/server&gt;
</span></span><span style=display:flex><span>        &lt;server&gt;
</span></span><span style=display:flex><span>            &lt;id&gt;thirdpart&lt;/id&gt;
</span></span><span style=display:flex><span>            &lt;username&gt;admin&lt;/username&gt;
</span></span><span style=display:flex><span>            &lt;password&gt;admin123&lt;/password&gt;
</span></span><span style=display:flex><span>        &lt;/server&gt;
</span></span><span style=display:flex><span>    &lt;/servers&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;mirrors&gt;
</span></span><span style=display:flex><span>        &lt;mirror&gt;
</span></span><span style=display:flex><span>            &lt;id&gt;central&lt;/id&gt;
</span></span><span style=display:flex><span>            &lt;name&gt;central&lt;/name&gt;
</span></span><span style=display:flex><span>            &lt;url&gt;http://localhost:8081/nexus/content/groups/public/&lt;/url&gt;
</span></span><span style=display:flex><span>            &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;
</span></span><span style=display:flex><span>        &lt;/mirror&gt;
</span></span><span style=display:flex><span>    &lt;/mirrors&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/settings&gt;
</span></span></code></pre></div></details><p>在项目的 pom.xml 文件中添加如下内容：</p><details><summary>pom config</summary><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>&lt;distributionManagement&gt;
</span></span><span style=display:flex><span>    &lt;snapshotRepository&gt;
</span></span><span style=display:flex><span>        &lt;id&gt;snapshots&lt;/id&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;Snapshot Repository&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;url&gt;http://localhost:8081/nexus/content/repositories/snapshots/&lt;/url&gt;
</span></span><span style=display:flex><span>    &lt;/snapshotRepository&gt;
</span></span><span style=display:flex><span>    &lt;repository&gt;
</span></span><span style=display:flex><span>        &lt;id&gt;releases&lt;/id&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;Release Repository&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;url&gt;http://localhost:8081/nexus/content/repositories/releases/&lt;/url&gt;
</span></span><span style=display:flex><span>    &lt;/repository&gt;
</span></span><span style=display:flex><span>&lt;/distributionManagement&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;repositories&gt;
</span></span><span style=display:flex><span>    &lt;repository&gt;
</span></span><span style=display:flex><span>        &lt;id&gt;public&lt;/id&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;Public&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;url&gt;http://localhost:8081/nexus/content/groups/public&lt;/url&gt;
</span></span><span style=display:flex><span>        &lt;releases&gt;
</span></span><span style=display:flex><span>            &lt;enabled&gt;true&lt;/enabled&gt;
</span></span><span style=display:flex><span>        &lt;/releases&gt;
</span></span><span style=display:flex><span>        &lt;snapshots&gt;
</span></span><span style=display:flex><span>            &lt;enabled&gt;true&lt;/enabled&gt;
</span></span><span style=display:flex><span>        &lt;/snapshots&gt;
</span></span><span style=display:flex><span>    &lt;/repository&gt;
</span></span><span style=display:flex><span>    &lt;repository&gt;
</span></span><span style=display:flex><span>        &lt;id&gt;snapshots&lt;/id&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;Snapshots&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;url&gt;http://localhost:8081/nexus/content/repositories/snapshots&lt;/url&gt;
</span></span><span style=display:flex><span>        &lt;releases&gt;
</span></span><span style=display:flex><span>            &lt;enabled&gt;true&lt;/enabled&gt;
</span></span><span style=display:flex><span>        &lt;/releases&gt;
</span></span><span style=display:flex><span>        &lt;snapshots&gt;
</span></span><span style=display:flex><span>            &lt;enabled&gt;true&lt;/enabled&gt;
</span></span><span style=display:flex><span>        &lt;/snapshots&gt;
</span></span><span style=display:flex><span>    &lt;/repository&gt;
</span></span><span style=display:flex><span>    &lt;repository&gt;
</span></span><span style=display:flex><span>        &lt;id&gt;thirdparty&lt;/id&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;3rd party&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;url&gt;http://localhost:8081/nexus/content/repositories/thirdparty/&lt;/url&gt;
</span></span><span style=display:flex><span>        &lt;releases&gt;
</span></span><span style=display:flex><span>            &lt;enabled&gt;true&lt;/enabled&gt;
</span></span><span style=display:flex><span>        &lt;/releases&gt;
</span></span><span style=display:flex><span>        &lt;snapshots&gt;
</span></span><span style=display:flex><span>            &lt;enabled&gt;true&lt;/enabled&gt;
</span></span><span style=display:flex><span>        &lt;/snapshots&gt;
</span></span><span style=display:flex><span>    &lt;/repository&gt;
</span></span><span style=display:flex><span>&lt;/repositories&gt;
</span></span><span style=display:flex><span>&lt;pluginRepositories&gt;
</span></span><span style=display:flex><span>    &lt;pluginRepository&gt;
</span></span><span style=display:flex><span>        &lt;id&gt;public&lt;/id&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;Plugin Repository&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;url&gt;http://localhost:8081/nexus/content/groups/public&lt;/url&gt;
</span></span><span style=display:flex><span>        &lt;layout&gt;default&lt;/layout&gt;
</span></span><span style=display:flex><span>        &lt;snapshots&gt;
</span></span><span style=display:flex><span>            &lt;enabled&gt;true&lt;/enabled&gt;
</span></span><span style=display:flex><span>        &lt;/snapshots&gt;
</span></span><span style=display:flex><span>    &lt;/pluginRepository&gt;
</span></span><span style=display:flex><span>&lt;/pluginRepositories&gt;
</span></span></code></pre></div></details><h1 id=向-nexus-中部署-snapshot-版本的包>向 nexus 中部署 snapshot 版本的包</h1><ol><li><p>如果是在项目中(已配置好私服环境)，可以直接运行<code>mvn deploy</code>来将文件上传到nexus私服中</p></li><li><p>如果只有单独的jar包或war包，可以运行以下命令部署：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mvn deploy:deploy-file <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>    -DgroupId=<span style=font-weight:700;font-style:italic>test</span> <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>    -DartifactId=<span style=font-weight:700;font-style:italic>test</span> <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>    -Dversion=1.0-SNAPSHOT <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>    -Dpackaging=jar <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>    -Dfile=test-1.0-SNAPSHOT.jar <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>    -Durl=http://localhost:8081/nexus/content/repositories/snapshots/ <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>    -DrepositoryId=snapshots <span style=color:#666;font-style:italic>\
</span></span></span><span style=display:flex><span><span style=color:#666;font-style:italic></span>    -s ~/.m2/settings.xml
</span></span></code></pre></div><p><code>-Dfile</code>指定文件的路径，<code>-s</code>指定maven运行的配置文件</p></li></ol></article></div></main><div><h4 id=signature>Thu Nov 9, 2017
cheon</h4><ul class=tags><li><a href=https://number317.github.io/blog/tags/maven>maven</a></li><li><a href=https://number317.github.io/blog/tags/nexus>nexus</a></li></ul><ul class=related><li><a class=previous href=https://number317.github.io/blog/struct/etcd_and_flannel/>Etcd & Flannel</a></li><li><a class=next href=https://number317.github.io/blog/struct/k8s_cluster_deploy/>K8s Cluster Deploy</a></li></ul></div></div><section id=footer><div id=author><h2>About Author</h2><hr><img src=https://number317.github.io/images/author.jpg></img><p>Life is dance we all have to do.</p></div><ul id=link><li><a href=https://github.com/number317/aloha.git target=_blank><i class="fa fa-github" alt=github></i></a></li><li><a href="mailto:cheon0112358d@gmail.com?subject=blog%27s%20feedback" target=_blank><i class="fa fa-envelope" alt=email></i></a></li><li id=wechat><i class="fa fa-wechat"></i></li><img class=qrcode src=https://number317.github.io/images/wechat.jpg></ul></section></body></html>