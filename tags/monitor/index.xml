<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Monitor on cheon's blog</title><link>https://number317.github.io/blog/tags/monitor/</link><description>Recent content in Monitor on cheon's blog</description><generator>Hugo</generator><language>en</language><lastBuildDate>Fri, 14 Jun 2019 01:21:26 +0800</lastBuildDate><atom:link href="https://number317.github.io/blog/tags/monitor/index.xml" rel="self" type="application/rss+xml"/><item><title>Fluentd Config</title><link>https://number317.github.io/blog/struct/fluentd_config/</link><pubDate>Fri, 05 Jan 2018 10:14:58 +0800</pubDate><guid>https://number317.github.io/blog/struct/fluentd_config/</guid><description>&lt;h1 id="命令列表"&gt;命令列表&lt;/h1&gt;
&lt;p&gt;Fluentd配置文件由以下配置文件组成：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;source&lt;/code&gt;命令 指明数据输入源&lt;/li&gt;
&lt;li&gt;&lt;code&gt;match&lt;/code&gt;命令 指明数据输出源&lt;/li&gt;
&lt;li&gt;&lt;code&gt;filter&lt;/code&gt;命令 指明事件处理的管道&lt;/li&gt;
&lt;li&gt;&lt;code&gt;system&lt;/code&gt;命令 指明系统级别配置&lt;/li&gt;
&lt;li&gt;&lt;code&gt;label&lt;/code&gt;命令 为输出分组并过滤内部路由&lt;/li&gt;
&lt;li&gt;&lt;code&gt;include&lt;/code&gt;命令 包含其他文件&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id="命令详解"&gt;命令详解&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;source&lt;/code&gt;: 数据的来源&lt;/p&gt;
&lt;p&gt;Fluentd的输入源通过&lt;code&gt;source&lt;/code&gt;命令选择和配置想要的输入插件来启用。Fluentd的标准输入插件包括&lt;code&gt;http&lt;/code&gt;和&lt;code&gt;forward&lt;/code&gt;。&lt;code&gt;http&lt;/code&gt;使得Fluentd转变为一个HTTP终端用于接收到来的HTTP信息，而&lt;code&gt;forward&lt;/code&gt;将fluentd转变为一个TCP终端用于接收TCP包。当然，它们可以被同时启用。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; # Receive events from 24224/tcp
 # This is used by log forwarding and the fluent-cat command
 &amp;lt;source&amp;gt;
 @type forward
 port 24224
 &amp;lt;/source&amp;gt;

 # http://this.host:9880/myapp.access?json={&amp;quot;event&amp;quot;:&amp;quot;data&amp;quot;}
 &amp;lt;source&amp;gt;
 @type http
 port 9880
 &amp;lt;/source&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;每一个&lt;code&gt;source&lt;/code&gt;命令必须包含一个&lt;code&gt;type&lt;/code&gt;参数。&lt;code&gt;type&lt;/code&gt;参数指定使用哪一个输入插件。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;match&lt;/code&gt;: 告诉fluentd做什么&lt;/p&gt;
&lt;p&gt;&lt;code&gt;match&lt;/code&gt;命令寻找匹配标签的事件并且处理它们。&lt;code&gt;match&lt;/code&gt;命令最常见的用法是将事件输出到其他系统（由于这个原因，这些插件被称为”输出插件“）。Fluentd的标准输出插件包括&lt;code&gt;file&lt;/code&gt;和&lt;code&gt;forward&lt;/code&gt;。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; # Receive events from 24224/tcp
 # This is used by log forwarding and the fluent-cat command
 &amp;lt;source&amp;gt;
 @type forward
 port 24224
 &amp;lt;/source&amp;gt;

 # http://this.host:9880/myapp.access?json={&amp;quot;event&amp;quot;:&amp;quot;data&amp;quot;}
 &amp;lt;source&amp;gt;
 @type http
 port 9880
 &amp;lt;/source&amp;gt;

 # Match events tagged with &amp;quot;myapp.access&amp;quot; and
 # store them to /var/log/fluent/access.%Y-%m-%d
 # Of course, you can control how you partition your data
 # with the time_slice_format option.
 &amp;lt;match myapp.access&amp;gt;
 @type file
 path /var/log/fluent/access
 &amp;lt;/match&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;每一个&lt;code&gt;match&lt;/code&gt;命令必须包括一个匹配的样式(match pattern)和一个&lt;code&gt;type&lt;/code&gt;参数。只有拥有一个和匹配样式(match pattern)匹配的标签的事件才会被送到输出源（在上面的例子中，只有拥有&amp;quot;myapp.access&amp;quot;标签的事件是匹配的）。&lt;code&gt;type&lt;/code&gt;参数指定了哪个输出插件被使用。&lt;/p&gt;</description></item></channel></rss>