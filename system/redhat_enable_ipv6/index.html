<!doctype html><html><head><meta charset=utf-8><meta name=description content="Aloha! Welcome to cheon's blog."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=76x76 href=https://number317.github.io/blog/img/apple-touch-icon.png><link rel=icon href=https://number317.github.io/blog/img/pen.svg><link rel=stylesheet href=https://number317.github.io/blog/css/global.css><link rel=stylesheet href=https://number317.github.io/blog/css/nav.css><link rel=stylesheet href=https://number317.github.io/blog/css/header.css><link rel=stylesheet href=https://number317.github.io/blog/css/index.css><link rel=stylesheet href=https://number317.github.io/blog/css/list.css><link rel=stylesheet href=https://number317.github.io/blog/css/single.css><link rel=stylesheet href=https://number317.github.io/blog/css/footer.css><link href="https://fonts.googleapis.com/css?family=Fira+Mono|Noto+Sans+SC|Old+Standard+TT&display=swap" rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><title>cheon's blog</title></head><body><section id=header><ul id=menus><li class=menu><a href=https://number317.github.io><span>Home</span></a></li><li class=menu><a href=https://number317.github.io/blog/categories><span>Categories</span></a></li><li class=menu><a href=https://number317.github.io/blog/tags><span>Tags</span></a></li><li class=menu><a href=https://github.com/number317><span>Projects</span></a></li></ul><h1 id=title><a href=https://number317.github.io/blog/>cheon's blog</a></h1></section><ul id=nav><li>»
<a href=https://number317.github.io/blog/>cheon's blog</a></li><li>»
<a href=https://number317.github.io/blog/system/>system</a></li><li class=active>»
<a href=https://number317.github.io/blog/system/redhat_enable_ipv6/>Redhat Enable Ipv6</a></li></ul><div id=content><main id=main><h1>Redhat Enable Ipv6</h1><time>Last updated Fri Jun 14, 2019</time><div><aside><h2>Table of Content</h1><nav id=TableOfContents></nav></aside><article id=content><h1 id=redhat设置开机启用ipv6>RedHat设置开机启用ipv6</h1><p>参照的系统信息：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ lsb_release -a
</span></span><span style=display:flex><span>LSB Version:    :core-4.1-amd64:core-4.1-noarch
</span></span><span style=display:flex><span>Distributor ID: RedHatEnterpriseServer
</span></span><span style=display:flex><span>Description:    Red Hat Enterprise Linux Server release 7.3 (Maipo)
</span></span><span style=display:flex><span>Release:    7.3
</span></span><span style=display:flex><span>Codename:   Maipo
</span></span></code></pre></div><p>首先查看系统是否开启了ipv6：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ifconfig | grep inet
</span></span></code></pre></div><p>或者</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ip addr | grep inet
</span></span></code></pre></div><p>如果开启了，则应该有ipv6的字段：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>inet 127.0.0.1/8 scope host lo
</span></span><span style=display:flex><span>inet6 ::1/128 scope host 
</span></span><span style=display:flex><span>inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic eth0
</span></span><span style=display:flex><span>inet6 fe80::a00:27ff:fe3a:b67/64 scope link 
</span></span><span style=display:flex><span>inet 192.168.33.10/24 brd 192.168.33.255 scope global eth1
</span></span><span style=display:flex><span>inet6 fe80::a00:27ff:fef4:9024/64 scope link 
</span></span><span style=display:flex><span>inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
</span></span><span style=display:flex><span>inet6 fe80::42:9fff:fe3c:183e/64 scope link 
</span></span></code></pre></div><p>如果没有开启，则只有inet的字段：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>inet 172.17.0.1  netmask 255.255.0.0  broadcast 0.0.0.0
</span></span><span style=display:flex><span>inet 10.0.52.181  netmask 255.255.255.0  broadcast 10.0.52.255
</span></span><span style=display:flex><span>inet 127.0.0.1  netmask 255.0.0.0
</span></span><span style=display:flex><span>inet 10.130.2.1  netmask 255.255.254.0  broadcast 0.0.0.0
</span></span></code></pre></div><p>查看grub开机配置：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat /etc/default/grub
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_TIMEOUT</span>=5
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_DISTRIBUTOR</span>=<span style=color:#666;font-style:italic>&#34;</span><span style=font-weight:700>$(</span>sed <span style=color:#666;font-style:italic>&#39;s, release .*$,,g&#39;</span> /etc/system-release<span style=font-weight:700>)</span><span style=color:#666;font-style:italic>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_DEFAULT</span>=saved
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_DISABLE_SUBMENU</span>=<span style=font-weight:700;font-style:italic>true</span>
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_TERMINAL_OUTPUT</span>=<span style=color:#666;font-style:italic>&#34;console&#34;</span>
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_CMDLINE_LINUX</span>=<span style=color:#666;font-style:italic>&#34;ipv6.disable=1  rd.lvm.lv=vg_root/lv_root rd.lvm.lv=vg_root/lv_swap rhgb quiet net.ifnames=0 biosdevname=0 ipv6.disable=1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_DISABLE_RECOVERY</span>=<span style=color:#666;font-style:italic>&#34;true&#34;</span>
</span></span></code></pre></div><p>可以看到<code>ipv6.disable=1</code>，说明ipv6在启动时就已经被禁用了，把该项修改为0：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_TIMEOUT</span>=5
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_DISTRIBUTOR</span>=<span style=color:#666;font-style:italic>&#34;</span><span style=font-weight:700>$(</span>sed <span style=color:#666;font-style:italic>&#39;s, release .*$,,g&#39;</span> /etc/system-release<span style=font-weight:700>)</span><span style=color:#666;font-style:italic>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_DEFAULT</span>=saved
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_DISABLE_SUBMENU</span>=<span style=font-weight:700;font-style:italic>true</span>
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_TERMINAL_OUTPUT</span>=<span style=color:#666;font-style:italic>&#34;console&#34;</span>
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_CMDLINE_LINUX</span>=<span style=color:#666;font-style:italic>&#34;ipv6.disable=0  rd.lvm.lv=vg_root/lv_root rd.lvm.lv=vg_root/lv_swap rhgb quiet net.ifnames=0 biosdevname=0 ipv6.disable=0&#34;</span>
</span></span><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GRUB_DISABLE_RECOVERY</span>=<span style=color:#666;font-style:italic>&#34;true&#34;</span>
</span></span></code></pre></div><p>重新生成grub的配置文件：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grub2-mkconfig -o /boot/grub2/grub.cfg
</span></span></code></pre></div><p>之后重启系统，再次查看网络情况即可发现ipv6已启用：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo reboot
</span></span><span style=display:flex><span>$ ifconfig | grep inet
</span></span></code></pre></div><p>应该可以查看到inet6字样。</p></article></div></main><div><h4 id=signature>Fri Jan 26, 2018
cheon</h4><ul class=tags><li><a href=https://number317.github.io/blog/tags/ipv6>ipv6</a></li></ul><ul class=related><li><a class=next href=https://number317.github.io/blog/system/lvm_intro/>Lvm Intro</a></li></ul></div></div><section id=footer><div id=author><h2>About Author</h2><hr><img src=https://number317.github.io/images/author.jpg></img><p>Life is dance we all have to do.</p></div><ul id=link><li><a href=https://github.com/number317/aloha.git target=_blank><i class="fa fa-github" alt=github></i></a></li><li><a href="mailto:cheon0112358d@gmail.com?subject=blog%27s%20feedback" target=_blank><i class="fa fa-envelope" alt=email></i></a></li><li id=wechat><i class="fa fa-wechat"></i></li><img class=qrcode src=https://number317.github.io/images/wechat.jpg></ul></section></body></html>