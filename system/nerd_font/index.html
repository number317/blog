<!doctype html><html><head><meta charset=utf-8><meta name=description content="Aloha! Welcome to cheon's blog."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=76x76 href=https://number317.github.io/blog/img/apple-touch-icon.png><link rel=icon href=https://number317.github.io/blog/img/pen.svg><link rel=stylesheet href=https://number317.github.io/blog/css/global.css><link rel=stylesheet href=https://number317.github.io/blog/css/nav.css><link rel=stylesheet href=https://number317.github.io/blog/css/header.css><link rel=stylesheet href=https://number317.github.io/blog/css/index.css><link rel=stylesheet href=https://number317.github.io/blog/css/list.css><link rel=stylesheet href=https://number317.github.io/blog/css/single.css><link rel=stylesheet href=https://number317.github.io/blog/css/footer.css><link href="https://fonts.font.im/css?family=Fira+Mono|Noto+Sans|Old+Standard+TT" rel=preload as=style onload='this.onload=null,this.rel="stylesheet"'><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css rel=preload as=style onload='this.onload=null,this.rel="stylesheet"'><script src=https://number317.github.io/blog/js/single.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.7/viewer.min.css rel=preload as=style onload='this.onload=null,this.rel="stylesheet"'><script src=https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.7/viewer.min.js async></script><title>cheon's blog</title></head><body><section id=header><ul id=menus><li class=menu><a href=https://number317.github.io><span>Home</span></a></li><li class=menu><a href=https://number317.github.io/blog/categories><span>Categories</span></a></li><li class=menu><a href=https://number317.github.io/blog/tags><span>Tags</span></a></li><li class=menu><a href=https://github.com/number317><span>Projects</span></a></li></ul><h1 id=title><a href=https://number317.github.io/blog/>cheon's blog</a></h1></section><ul id=nav><li>»
<a href=https://number317.github.io/blog/>cheon's blog</a></li><li>»
<a href=https://number317.github.io/blog/system/>system</a></li><li class=active>»
<a href=https://number317.github.io/blog/system/nerd_font/>Nerd Font</a></li></ul><div id=content><main id=main><h1>Nerd Font</h1><time>Last updated Fri Jun 21, 2019</time><div><aside><h2>Table of Content</h1><nav id=TableOfContents><ul><li><a href=#vimdevicons-配置>vimdevicons 配置</a></li><li><a href=#ranger-配置>ranger 配置</a></li></ul></nav></aside><article id=content><h1 id=图标字体>图标字体</h1><p>在用 <a href=https://github.com/robm/dzen target=_blank rel="noopener noreferrer">dzen2
</a>给桌面添加一个 panel 的时候用到了 <a href=http://fontawesome.com target=_blank rel="noopener noreferrer">FontAwesome
</a>，但是在 urxvt 终端下 FontAwesome 无法正常显示出来（不知是不是配置有误）。这样在用 vim 写脚本时不够直观。又不想换终端，所以只能从字体下手。</p><p>之前就了解到过 <a href=https://github.com/ryanoasis/nerd-fonts target=_blank rel="noopener noreferrer">nerd-fonts
</a>这个项目，可以将图标字体整合进一个你想要的字体中。项目主页提供了一些已经预先构建好的字体，可以在<a href=https://nerdfonts.com/ target=_blank rel="noopener noreferrer">
官网
</a>直接下载使用。目前终端用的字体是从另一台 Mac 上复制出来的 SFMono，这也是 Mac 内置终端默认的字体。已经习惯了这款字体后就不想换了，因此准备构建自己的字体。</p><p>根据项目主页的教程，执行它提供给你的 <code>font-patcher</code> 脚本前需要安装 <code>fontforge</code>:</p><div class="code-block code-block-container-indented"><pre><code id=code-ae96ead43bb8ee44d7d067c253707e89>pacman -S fontforge</code></pre><button class=copy-code-button onclick='copyCode("code-ae96ead43bb8ee44d7d067c253707e89",this)' title=copy>
<i class="fa fa-copy"></i></button></div><p>安装完依赖，下载 <code>font-patcher</code> 脚本并添加可执行权限:</p><div class="code-block code-block-container-indented"><pre><code id=code-802d0a9bb95b903bc578e9153d38d6c2>curl -OL https://raw.githubusercontent.com/ryanoasis/nerd-fonts/master/font-patcher
chmod &#43;x font-patcher</code></pre><button class=copy-code-button onclick='copyCode("code-802d0a9bb95b903bc578e9153d38d6c2",this)' title=copy>
<i class="fa fa-copy"></i></button></div><p>执行脚本进行构建字体:</p><div class="code-block code-block-container-indented"><pre><code id=code-69f567c89c65863623ec9bc893ca6e94>./font-patcher path/to/SFMono-Regular.otf -out path/to/SFMono-Nerd/ -c -l -s</code></pre><button class=copy-code-button onclick='copyCode("code-69f567c89c65863623ec9bc893ca6e94",this)' title=copy>
<i class="fa fa-copy"></i></button></div><ul><li><code>-c</code> 表示添加所有可用字形</li><li><code>-l</code> 表示适应行高（尝试将 powerline 的分隔符均匀地放在中间）</li><li><code>-s</code> 表示使用单个字符宽度</li></ul><p>运行脚本发现报错，提示找不到 <code>src</code> 目录下的字体文件。这提示我们还需要去下载 <code>src</code> 目录下的字体文件。这里有一个技巧，关于如何从 github 下载某个文件夹。</p><p>以此处为例，需要下载<a href=https://github.com/ryanoasis/nerd-fonts/tree/master/src/glyphs target=_blank rel="noopener noreferrer">
https://github.com/ryanoasis/nerd-fonts/tree/master/src/glyphs
</a>目录下的所有字体文件。可以将 url 中的 &ldquo;tree/master&rdquo; 替换为 ”trunk“，再用 svn 去下载就好了。</p><p>所以这里执行 <code>svn checkout https://github.com/ryanoasis/nerd-fonts/trunk/src/glyphs</code>，并将文件夹发到正确的路径，具体如下:</p><div class="code-block code-block-container-indented"><pre><code id=code-4c4361020acafff4d3b23b05efa4661f>├── font-patcher
├── SF-Mono
├── SF-Mono-Nerd
└── src/
    └── glyphs
        ├── devicons.ttf
        ├── font-awesome-extension.ttf
        ├── FontAwesome.otf
        ├── font-logos.ttf
        ├── materialdesignicons-webfont.ttf
        ├── NerdFontsSymbols 1000 EM Nerd Font Complete Blank.sfd
        ├── NerdFontsSymbols 2048 EM Nerd Font Complete Blank.sfd
        ├── octicons.ttf
        ├── original-source.otf
        ├── Pomicons.otf
        ├── PowerlineExtraSymbols.otf
        ├── PowerlineSymbols.otf
        ├── Symbols-1000-em Nerd Font Complete.ttf
        ├── Symbols-2048-em Nerd Font Complete.ttf
        ├── Symbols Template 1000 em.ttf
        ├── Symbols Template 2048 em.ttf
        ├── Unicode_IEC_symbol_font.otf
        └── weathericons-regular-webfont.ttf</code></pre><button class=copy-code-button onclick='copyCode("code-4c4361020acafff4d3b23b05efa4661f",this)' title=copy>
<i class="fa fa-copy"></i></button></div><p>接下来就可以再次执行命令了，等待字体构建完毕，将生成的字体放到 <code>/usr/share/fonts/SF-Mono</code> 目录下，执行 <code>fc-list|grep SF</code>，应该能看到刚刚生成的文字了。</p><p>接下来配置 urxvt，设置字体:</p><div class="code-block code-block-container-indented"><pre><code id=code-6f45d948a57a9192f7f6ea28301217aa>! vi: set ft=xdefaults :

!!font
URxvt.font: xft:SF Mono:antialias=True:style=Regular:size=16:hinting=true,\
            xft:.PingFang SC:antialias=True:style=Regular:size=16:hinting=true

URxvt.boldFont: xft:SF Mono:antialias=True:style=Bold:size=16:hinting=true,\
                xft:.PingFang SC:antialias=True:style=Bold:size=16:hinting=true

URxvt.italicFont: xft:SF Mono:antialias=True:style=Regular Italic:size=16:hinting=true,\
                  xft:.PingFang SC:antialias=True:style=Light:size=16:hinting=true

URxvt.boldItalicFont: xft:SF Mono:antialias=True:style=Bold Italic Italic:size=16:hinting=true,\
                      xft:.PingFang SC:antialias=True:style=Medium:size=16:hinting=true

URxvt.letterSpace: -2</code></pre><button class=copy-code-button onclick='copyCode("code-6f45d948a57a9192f7f6ea28301217aa",this)' title=copy>
<i class="fa fa-copy"></i></button></div><p>重新加载 urxvt 配置:</p><div class="code-block code-block-container-indented"><pre><code id=code-94545d724c998aaa0cb446f02d3e8f70>xrdb -remove &amp;&amp; xrdb -load ~/.Xresources</code></pre><button class=copy-code-button onclick='copyCode("code-94545d724c998aaa0cb446f02d3e8f70",this)' title=copy>
<i class="fa fa-copy"></i></button></div><p>重新打开 urxvt 并打开带有图标的文本，成功的话应该能看到图标显示出来了。</p><p><img src=https://number317.github.io/blog/system/images/nerd_font_img1.jpg alt="icon text"></p><p>有了 nerd fonts，不仅仅是可以在文本里显示图标，还可以美化一些软件，比如 vim，ranger。</p><h2 id=vimdevicons-配置>vimdevicons 配置</h2><p><a href=https://github.com/ryanoasis/vim-devicons target=_blank rel="noopener noreferrer">devicons
</a>可以为一些插件根据文件类型添加图标，以 <a href=https://github.com/scrooloose/nerdtree.git target=_blank rel="noopener noreferrer">nerdtree
</a>为例:</p><ol><li><p>安装 nerdtree 和 devicons。在 Plug 配置中添加</p><div class="code-block code-block-container-indented"><pre><code id=code-adbde8cd2f72133a5c63bb1dce5b80e9>Plug &#39;scrooloose/nerdtree&#39;
Plug &#39;ryanoasis/vim-devicons&#39;</code></pre><button class=copy-code-button onclick='copyCode("code-adbde8cd2f72133a5c63bb1dce5b80e9",this)' title=copy>
<i class="fa fa-copy"></i></button></div><p>执行 <code>PlugInstall</code> 即可完成安装。</p></li><li><p>设置 vim 默认编码为 utf-8:</p><div class="code-block code-block-container-indented"><pre><code id=code-4b8bfd03737948a2cbee778f7672d5dd>set encoding=UTF-8</code></pre><button class=copy-code-button onclick='copyCode("code-4b8bfd03737948a2cbee778f7672d5dd",this)' title=copy>
<i class="fa fa-copy"></i></button></div></li></ol><p>这样就已经配置完毕了，打开 nerdtree 应该能看见不同文件的图标。</p><p><img src=https://number317.github.io/blog/system/images/nerd_font_img2.jpg alt=vimdevicons></p><h2 id=ranger-配置>ranger 配置</h2><p>下载插件脚本:</p><div class="code-block code-block-container-indented"><pre><code id=code-0223a1119318670dcbff5398fdd95179>curl -L -o ~/.config/ranger/devicons.py &#34;https://gist.github.com/alexanderjeurissen/73053bb0a8b02f5d7f1674294c5fec3c/raw/bf6aca081081b6b6b2b1531f1ed6a040c10a4d2c/devicons.py&#34;
curl -L -o ~/.config/ranger/plugins/devicons_linemode.py &#34;https://gist.githubusercontent.com/alexanderjeurissen/73053bb0a8b02f5d7f1674294c5fec3c/raw/bf6aca081081b6b6b2b1531f1ed6a040c10a4d2c/devicons_linemode.py&#34;</code></pre><button class=copy-code-button onclick='copyCode("code-0223a1119318670dcbff5398fdd95179",this)' title=copy>
<i class="fa fa-copy"></i></button></div><p>在 <code>rc.conf</code> 中加入配置:</p><div class="code-block code-block-container-indented"><pre><code id=code-5ceb4ce27bff9a43eb0498be63e4a933>default_linemode devicons</code></pre><button class=copy-code-button onclick='copyCode("code-5ceb4ce27bff9a43eb0498be63e4a933",this)' title=copy>
<i class="fa fa-copy"></i></button></div><p>重新打开 ranger，应该可以看到图标了。</p><p><img src=https://number317.github.io/blog/system/images/nerd_font_img3.jpg alt=ranger></p></article></div></main><div><h4 id=signature>Fri Jun 21, 2019
cheon</h4><ul class=tags><li><a href=https://number317.github.io/blog/tags/font>font</a></li><li><a href=https://number317.github.io/blog/tags/icons>icons</a></li></ul><ul class=related><li><a class=previous href=https://number317.github.io/blog/system/vps_openvpn/>Vps Openvpn</a></li><li><a class=next href=https://number317.github.io/blog/system/archlinux_nvidia/>Archlinux Nvidia</a></li></ul></div></div><section id=footer><div id=author><h2>About Author</h2><hr><img src=https://number317.github.io/images/author.jpg></img><p>Life is dance we all have to do.</p></div><ul id=link><li><a href=https://github.com/number317/aloha.git target=_blank><i class="fa fa-github" alt=github></i></a></li><li><a href="mailto:cheon0112358d@gmail.com?subject=blog%27s%20feedback" target=_blank><i class="fa fa-envelope" alt=email></i></a></li><li id=wechat><i class="fa fa-wechat"></i></li><img class=qrcode src=https://number317.github.io/images/wechat.jpg></ul></section></body></html>