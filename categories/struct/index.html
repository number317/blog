<!doctype html><html><head><meta charset=utf-8><meta name=description content="Aloha! Welcome to cheon's blog."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=76x76 href=https://number317.github.io/blog/img/apple-touch-icon.png><link rel=icon href=https://number317.github.io/blog/img/pen.svg><link rel=stylesheet href=https://number317.github.io/blog/css/global.css><link rel=stylesheet href=https://number317.github.io/blog/css/nav.css><link rel=stylesheet href=https://number317.github.io/blog/css/header.css><link rel=stylesheet href=https://number317.github.io/blog/css/index.css><link rel=stylesheet href=https://number317.github.io/blog/css/list.css><link rel=stylesheet href=https://number317.github.io/blog/css/single.css><link rel=stylesheet href=https://number317.github.io/blog/css/footer.css><link href="https://fonts.googleapis.com/css?family=Fira+Mono|Noto+Sans+SC|Old+Standard+TT&display=swap" rel=stylesheet><link href=https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><title>cheon's blog</title></head><body><section id=header><ul id=menus><li class=menu><a href=https://number317.github.io><span>Home</span></a></li><li class=menu><a href=https://number317.github.io/blog/categories><span>Categories</span></a></li><li class=menu><a href=https://number317.github.io/blog/tags><span>Tags</span></a></li><li class=menu><a href=https://github.com/number317><span>Projects</span></a></li></ul><h1 id=title><a href=https://number317.github.io/blog/>cheon's blog</a></h1></section><ul id=nav><li>»
<a href=https://number317.github.io/blog/>cheon's blog</a></li><li>»
<a href=https://number317.github.io/blog/categories/>categories</a></li><li class=active>»
<a href=https://number317.github.io/blog/categories/struct/>categories</a></li></ul><div id=content><main><article><header><h2>Struct</h2></header></article><ul id=articles><li class=article><h3><a href=https://number317.github.io/blog/struct/emqx_backend_mysql/><span><font class=date>Oct 2020</font> | Emqx Backend Mysql</span></a></h3><p>emqx mysql 插件 erlang 环境配置 emacs 编辑器配置 emqx 源码编译 添加自定义插件 启用自定义插件 反编译 emqx_backend_mysql 插件 构造插件 搭建临时 git 服务 重新编译 测试插件 构建镜像 emqx mysql 插件 erlang 环境配置 e</p></li><li class=article><h3><a href=https://number317.github.io/blog/struct/org_blog_with_hugo/><span><font class=date>Sep 2020</font> | 用 hugo 组织 org 文件写博客</span></a></h3><p>用 hugo 和 emacs org 格式来构建博客</p></li><li class=article><h3><a href=https://number317.github.io/blog/struct/k8s_note/><span><font class=date>Aug 2019</font> | K8s Note</span></a></h3><p>k8s 备忘 ingress 配置证书 首先要在 ingress 所在 namespace 下创建 tls 类型的 secret:
kubectl create secret tls https-certs --key /path/to/keyfile --cert /path/to/certfil</p></li><li class=article><h3><a href=https://number317.github.io/blog/struct/logstash_to_es/><span><font class=date>Jul 2019</font> | Logstash to ES</span></a></h3><p>logstash 配置日志发送 ES 日志收集的架构如下所示:
┌────────────┐ │Java logback│\ └────────────┘ \ ┌─────┐ ┌────────┐ ┌──────┐ ┌────────┐ │kafka│ ───&amp;gt; │logstash│ ───&</p></li><li class=article><h3><a href=https://number317.github.io/blog/struct/ceph_ansible/><span><font class=date>Jun 2019</font> | Ceph Ansible</span></a></h3><p>Ceph 介绍 无论是想要为云平台提供 Ceph Object Storage 或 Ceph Block Device 服务，部署一个 Ceph Filesystem 总是从设置每一个 Ceph 节点，网络和 Ceph 存储集群开始。一个 Ceph 存储集群至少需要一个 Ceph Monitor，C</p></li><li class=article><h3><a href=https://number317.github.io/blog/struct/docker_graph_migrate/><span><font class=date>May 2019</font> | Docker Graph Migrate</span></a></h3><p>docker 目录迁移 服务器根目录磁盘空间比较小，只有50G，在使用一段时间后镜像增多，磁盘不够用，准备将 docker 的目录挂载到新加的磁盘。挂载硬盘后如下：
NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sr0 11:0 1 3.7M 0 rom vda 2</p></li><li class=article><h3><a href=https://number317.github.io/blog/struct/skywalking_deploy/><span><font class=date>Apr 2019</font> | Skywalking Deploy</span></a></h3><p>skywalking 部署 skywalking 是一个国产开源的调用链监控工具，可用于分析请求中哪些操作比较慢。官方提供了 k8s 的部署配置，但这个配置里的镜像是不对的，具体版本对应的镜像可以在Dockerhub上找到。如果想要更换版本，最好把 ES 中的索引先删除，否则可能会导致应用报错。
架</p></li><li class=article><h3><a href=https://number317.github.io/blog/struct/graylog_sidecar/><span><font class=date>Nov 2018</font> | Graylog Sidecar</span></a></h3><p>graylog sidecar 部署配置 graylog sidecar 用于配置从文件读取日志，具体读取文件可以采用filebeat和nxlog。这里在debian的容器中部署sidecar来示例。
安装sidecar 从下载页面下载对应的包，这里是debian系统，graylog版本是2.4。所</p></li><li class=article><h3><a href=https://number317.github.io/blog/struct/graylog_k8s_install/><span><font class=date>Nov 2018</font> | Graylog K8s Install</span></a></h3><p>graylog k8s 部署 graylog是一个日志聚合工具，用于统一展示应用日志。这里基于官方文档，在k8s集群中部署一套简单的单节点graylog服务。
mongodb 部署 mongodb 在服务中用于存储graylog的配置信息。以下是部署文件（没有进行数据持久化操作）：
mongodb</p></li><li class=article><h3><a href=https://number317.github.io/blog/struct/ansible_variables/><span><font class=date>May 2018</font> | Ansible Variables</span></a></h3><p>ansible 变量 ansible 变量以[A-Za-z]开头，可以包含下划线_和数字[0-9]，标准是全部使用小写字母。在清单(inventory)文件里，变量使用=赋值，如：
foo=bar 在剧本(playbook)或变量文件里，变量用:赋值，如：
foo: bar Playbook Var</p></li></ul></main></div><section id=footer><ul class="pagination pagination-default"><li class="page-item disabled"><a aria-disabled=true aria-label=First class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;&#171;</span></a></li><li class="page-item disabled"><a aria-disabled=true aria-label=Previous class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;</span></a></li><li class="page-item active"><a aria-current=page aria-label="Page 1" class=page-link role=button>1</a></li><li class=page-item><a href=https://number317.github.io/blog/categories/struct/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class=page-item><a href=https://number317.github.io/blog/categories/struct/page/3/ aria-label="Page 3" class=page-link role=button>3</a></li><li class=page-item><a href=https://number317.github.io/blog/categories/struct/page/2/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=https://number317.github.io/blog/categories/struct/page/3/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul><div id=author><h2>About Author</h2><hr><img src=https://number317.github.io/images/author.jpg></img><p>Life is dance we all have to do.</p></div><ul id=link><li><a href=https://github.com/number317/aloha.git target=_blank><i class="fa fa-github" alt=github></i></a></li><li><a href="mailto:cheon0112358d@gmail.com?subject=blog%27s%20feedback" target=_blank><i class="fa fa-envelope" alt=email></i></a></li><li id=wechat><i class="fa fa-wechat"></i></li><img class=qrcode src=https://number317.github.io/images/wechat.jpg></ul></section></body></html>